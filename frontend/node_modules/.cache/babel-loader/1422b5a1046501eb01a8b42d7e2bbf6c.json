{"ast":null,"code":"var _jsxFileName = \"/Users/jordanblane/Desktop/watchou/frontend/src/watch.js\";\nimport React from 'react';\nimport './CSS/watch.css';\nimport Axios from 'axios';\n\nvar cryptoJs = require('crypto-js');\n\nconst queryString = require('query-string');\n\nconst hostname = window.location.hostname;\nexport class WatchPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.Init = () => {\n      console.log('a');\n      let token = decodeURIComponent(document.cookie);\n\n      if (token) {\n        token = token.split('=');\n        token = token[1];\n        var message = {\n          token: process.env.REACT_APP_SECRET_TOKEN_CODE,\n          data: token\n        };\n        var cipher = cryptoJs.AES.encrypt(JSON.stringify(message), process.env.REACT_APP_SECRET_TOKEN_CODE).toString();\n        cipher = cipher.replace(/[/]/g, '★');\n        cipher = cipher.replace(/[+]/g, '☆');\n        fetch(`http://${hostname}:4000/api/getuser?data=${cipher}`).then(response => response.json()).then(data => {\n          var d = data.data;\n          d = d.replace(/[★]/g, '/');\n          d = d.replace(/[☆]/g, '+');\n          var b = cryptoJs.AES.decrypt(d, process.env.REACT_APP_SECRET_TOKEN_CODE.toString());\n          var dec = JSON.parse(b.toString(cryptoJs.enc.Utf8));\n          this.setState({\n            user: dec.user[0]\n          });\n        });\n      }\n    };\n\n    this.loadvideo = () => {\n      var query = queryString.parse(window.location.search);\n      console.log(query);\n\n      if (query.video) {\n        var message = {\n          token: process.env.REACT_APP_SECRET_TOKEN_CODE,\n          uid: query.video\n        };\n        var cipher = cryptoJs.AES.encrypt(JSON.stringify(message), process.env.REACT_APP_SECRET_TOKEN_CODE).toString();\n        cipher = cipher.replace(/[/]/g, '★');\n        cipher = cipher.replace(/[+]/g, '☆');\n        Axios.get(`http://${hostname}:4000/api/getvideobyuid?data=${cipher}`).then(response => {\n          // return console.log(response)\n          var d = response.data.data.data;\n          d = d.replace(/[★]/g, '/');\n          d = d.replace(/[☆]/g, '+');\n          var b = cryptoJs.AES.decrypt(d, process.env.REACT_APP_SECRET_TOKEN_CODE.toString());\n          var dec = JSON.parse(b.toString(cryptoJs.enc.Utf8));\n          document.getElementById('videoTitle').innerHTML = dec.data[0].videoname;\n          document.getElementById('videoDes').innerHTML = dec.data[0].videodes;\n          document.getElementById('videoPlayer').type = `video/${dec.data[0].videoext}`;\n          var message = {\n            token: process.env.REACT_APP_SECRET_TOKEN_CODE,\n            uid: dec.data[0].uid\n          };\n          var cipher = cryptoJs.AES.encrypt(JSON.stringify(message), process.env.REACT_APP_SECRET_TOKEN_CODE).toString();\n          cipher = cipher.replace(/[/]/g, '★');\n          cipher = cipher.replace(/[+]/g, '☆');\n          document.getElementById('videoPlayer').src = `http://${hostname}:4000/api/video?data=${cipher}`;\n          document.getElementById('videoPlayer').poster = `data:image/${dec.data[0].thumext};base64,${response.data.data.thum}`;\n          document.getElementById('videotime').value = 0;\n          document.getElementById('videoPlayer').play();\n\n          document.getElementById('videoPlayer').ontimeupdate = () => {\n            this.updatevideotime();\n          };\n        });\n      } else {//ERROR NO VIDEO PICKED\n      }\n    };\n\n    this.inputhandler = () => {\n      document.getElementById('videotime').max = document.getElementById('videoPlayer').duration;\n      document.getElementById('videoPlayer').currentTime = document.getElementById('videotime').value;\n    };\n\n    this.handlePlay = e => {\n      console.log(e);\n\n      if (e == '1') {\n        var isPaused = document.getElementById('videoPlayer').paused;\n\n        if (isPaused) {\n          //SHOW PLAY SYMBOLL\n          document.getElementById('playbutton').innerHTML = '❚❚';\n          document.getElementById('videoPlayer').play();\n        } else {\n          document.getElementById('playbutton').innerHTML = '►';\n          document.getElementById('videoPlayer').pause();\n        }\n      } else {\n        var isPaused = document.getElementById('videoPlayer').paused;\n\n        if (isPaused) {\n          //SHOW PAUSE SYMBOLL\n          document.getElementById('playbutton').innerHTML = '❚❚';\n          document.getElementById('videoPlayer').play();\n        } else {\n          document.getElementById('playbutton').innerHTML = '►';\n          document.getElementById('videoPlayer').pause();\n        }\n      }\n    };\n\n    this.handlevolume = () => {\n      console.log();\n      document.getElementById('videoPlayer').volume = document.getElementById('videovolume').value;\n    };\n\n    this.updatevideotime = () => {\n      document.getElementById('videotime').max = document.getElementById('videoPlayer').duration;\n      document.getElementById('videotime').value = document.getElementById('videoPlayer').currentTime;\n      document.getElementById('videoCurrentTime').innerHTML = Math.round(document.getElementById('videoPlayer').currentTime);\n    };\n\n    this.state = {\n      user: ''\n    };\n    this.loadvideo.bind(this);\n    this.Init.bind(this);\n    this.Init();\n    this.loadvideo();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"watchWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"leftScreen\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"videoContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"video\", {\n      id: \"videoPlayer\",\n      className: \"videoPlayer\",\n      onClick: () => {\n        this.handlePlay('1');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"videoControlsHover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"videoControls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"videobutton\",\n      id: \"playbutton\",\n      onClick: () => {\n        this.handlePlay('2');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"\\u25BA\"), React.createElement(\"p\", {\n      id: \"videoCurrentTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"0:00\"), React.createElement(\"input\", {\n      type: \"range\",\n      min: \"0\",\n      max: \"100\",\n      id: \"videotime\",\n      className: \"videotime\",\n      onChange: () => {\n        this.inputhandler();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"videoDuration\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"0:00\"), React.createElement(\"input\", {\n      type: \"range\",\n      min: \"0\",\n      max: \"1\",\n      id: \"videovolume\",\n      className: \"videovolume\",\n      step: \"0.05\",\n      onChange: () => {\n        this.handlevolume();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"aboutVideo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"topAboutDiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      id: \"videoTitle\",\n      className: \"videoTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })), React.createElement(\"hr\", {\n      className: \"breaker\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"videoDes\",\n      className: \"videoDes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"rightScreen\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sidebarDiv\",\n      id: \"sidebarDiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/jordanblane/Desktop/watchou/frontend/src/watch.js"],"names":["React","Axios","cryptoJs","require","queryString","hostname","window","location","WatchPage","Component","constructor","props","Init","console","log","token","decodeURIComponent","document","cookie","split","message","process","env","REACT_APP_SECRET_TOKEN_CODE","data","cipher","AES","encrypt","JSON","stringify","toString","replace","fetch","then","response","json","d","b","decrypt","dec","parse","enc","Utf8","setState","user","loadvideo","query","search","video","uid","get","getElementById","innerHTML","videoname","videodes","type","videoext","src","poster","thumext","thum","value","play","ontimeupdate","updatevideotime","inputhandler","max","duration","currentTime","handlePlay","e","isPaused","paused","pause","handlevolume","volume","Math","round","state","bind","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './CSS/watch.css'\nimport Axios from 'axios';\nvar cryptoJs = require('crypto-js');\nconst queryString = require('query-string');\nconst hostname = window.location.hostname;\n\n\nexport class WatchPage extends React.Component {\n\n  constructor(props){\n    super(props);\n\n    this.state={\n      user:''\n    }\n\n    this.loadvideo.bind(this)\n    this.Init.bind(this)\n    this.Init()\n    this.loadvideo()\n\n  }\n  Init = () => {\n    console.log('a')\n    let token = decodeURIComponent(document.cookie);\n    if(token){\n      token = token.split('=');\n      token = token[1];\n      var message = {token:process.env.REACT_APP_SECRET_TOKEN_CODE,data:token}\n      var cipher = cryptoJs.AES.encrypt(JSON.stringify(message),process.env.REACT_APP_SECRET_TOKEN_CODE).toString();\n      cipher = cipher.replace(/[/]/g,'★')\n      cipher = cipher.replace(/[+]/g,'☆')\n      fetch(`http://${hostname}:4000/api/getuser?data=${cipher}`)\n      .then(response => response.json())\n      .then(data => {\n        var d = data.data\n        d = d.replace(/[★]/g,'/')\n        d = d.replace(/[☆]/g,'+')\n        var b = cryptoJs.AES.decrypt(d,process.env.REACT_APP_SECRET_TOKEN_CODE.toString())\n        var dec = JSON.parse(b.toString(cryptoJs.enc.Utf8))\n        this.setState({user : dec.user[0]})\n      })\n    }\n  }\n\n\n  loadvideo = () => {\n    var query = queryString.parse(window.location.search);\n    console.log(query)\n    if(query.video)\n    {\n      var message = {token:process.env.REACT_APP_SECRET_TOKEN_CODE,uid:query.video}\n      var cipher = cryptoJs.AES.encrypt(JSON.stringify(message),process.env.REACT_APP_SECRET_TOKEN_CODE).toString();\n      cipher = cipher.replace(/[/]/g,'★')\n      cipher = cipher.replace(/[+]/g,'☆')\n      Axios.get(`http://${hostname}:4000/api/getvideobyuid?data=${cipher}`)\n      .then(response => {\n        // return console.log(response)\n        var d = response.data.data.data\n        d = d.replace(/[★]/g,'/')\n        d = d.replace(/[☆]/g,'+')\n        var b = cryptoJs.AES.decrypt(d,process.env.REACT_APP_SECRET_TOKEN_CODE.toString())\n        var dec = JSON.parse(b.toString(cryptoJs.enc.Utf8))\n        document.getElementById('videoTitle').innerHTML = dec.data[0].videoname\n        document.getElementById('videoDes').innerHTML = dec.data[0].videodes\n        document.getElementById('videoPlayer').type = `video/${dec.data[0].videoext}`\n        var message = {token:process.env.REACT_APP_SECRET_TOKEN_CODE,uid:dec.data[0].uid}\n        var cipher = cryptoJs.AES.encrypt(JSON.stringify(message),process.env.REACT_APP_SECRET_TOKEN_CODE).toString();\n        cipher = cipher.replace(/[/]/g,'★')\n        cipher = cipher.replace(/[+]/g,'☆')\n        document.getElementById('videoPlayer').src = `http://${hostname}:4000/api/video?data=${cipher}`\n        document.getElementById('videoPlayer').poster = `data:image/${dec.data[0].thumext};base64,${response.data.data.thum}`\n        document.getElementById('videotime').value = 0\n        document.getElementById('videoPlayer').play();\n        document.getElementById('videoPlayer').ontimeupdate = () => {this.updatevideotime()}\n      })\n    }\n    else{\n      //ERROR NO VIDEO PICKED\n    }\n  }\n\n\n  inputhandler = () => {\n    document.getElementById('videotime').max = document.getElementById('videoPlayer').duration\n    document.getElementById('videoPlayer').currentTime = document.getElementById('videotime').value\n  }\n\n  handlePlay = (e) => {\n    console.log(e)\n    if(e == '1'){\n      var isPaused = document.getElementById('videoPlayer').paused \n      if(isPaused){\n        //SHOW PLAY SYMBOLL\n        document.getElementById('playbutton').innerHTML = '❚❚'\n        document.getElementById('videoPlayer').play()\n      }else{\n        document.getElementById('playbutton').innerHTML = '►'\n        document.getElementById('videoPlayer').pause()\n      }\n    }\n    else{\n      var isPaused = document.getElementById('videoPlayer').paused \n      if(isPaused){\n        //SHOW PAUSE SYMBOLL\n        document.getElementById('playbutton').innerHTML = '❚❚'\n        document.getElementById('videoPlayer').play()\n      }else{\n        document.getElementById('playbutton').innerHTML = '►'\n        document.getElementById('videoPlayer').pause()\n      }\n    }\n  }\n\n  handlevolume = () => {\n    console.log()\n    document.getElementById('videoPlayer').volume = document.getElementById('videovolume').value\n  }\n\n  updatevideotime = () => {\n    document.getElementById('videotime').max = document.getElementById('videoPlayer').duration\n    document.getElementById('videotime').value = document.getElementById('videoPlayer').currentTime\n    document.getElementById('videoCurrentTime').innerHTML = Math.round(document.getElementById('videoPlayer').currentTime)\n  }\n\n\n  render(){\n    return(\n    <div className=\"watchWrapper\">\n      <div className=\"leftScreen\">\n        <div className=\"videoContainer\">\n          <video id='videoPlayer' className=\"videoPlayer\" onClick={()=>{this.handlePlay('1')}}>\n            \n          </video>\n          <div className=\"videoControlsHover\">\n          <div className=\"videoControls\">\n            <button className=\"videobutton\" id='playbutton' onClick={()=>{this.handlePlay('2')}}>►</button>\n            <p id='videoCurrentTime'>0:00</p>\n            <input type=\"range\" min=\"0\" max=\"100\" id=\"videotime\" className=\"videotime\" onChange={()=>{this.inputhandler()}} />\n            <p id='videoDuration'>0:00</p>\n            <input type=\"range\" min=\"0\" max=\"1\" id=\"videovolume\" className=\"videovolume\" step=\"0.05\" onChange={()=>{this.handlevolume()}} />\n          </div>\n          </div>\n        </div>\n        <div className=\"aboutVideo\">\n          <div className=\"topAboutDiv\">\n            <h1 id='videoTitle' className=\"videoTitle\"></h1>\n          </div>\n          <hr className=\"breaker\" />\n          <p id='videoDes' className=\"videoDes\"></p>\n        </div>\n      </div>\n      {/* <button onClick={()=>{        console.log(document.getElementById('videoPlayer').duration)}}>asd</button> */}\n      <div className=\"rightScreen\">\n        <div className=\"sidebarDiv\" id='sidebarDiv'>\n        </div>\n      </div>\n    </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}